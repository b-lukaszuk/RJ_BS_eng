<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Bartlomiej Lukaszuk" />
  <title>Solutions - Comparisons of Categorical Data - Romeo and Julia, where Romeo is Basic Statistics</title>
  <link rel="stylesheet" href="./style.css"/>
    <script src="./mousetrap.min.js"></script>
    <style>
  @font-face {
    font-family: JuliaMono-Regular;
    src: url("./JuliaMono-Regular.woff2");
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <link rel="stylesheet" href="./github.min.css">
<script src="./highlight.min.js"></script>
<script src="./julia.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre').forEach((el) => {
        if (!el.classList.contains('output')) {
            hljs.highlightElement(el);
        }
    });
});
</script>
 
</head>
<body>
<script>
function click_next() {
  var next = document.getElementById('nav-next');
  next.firstElementChild.nextElementSibling.click();
}
function click_prev() {
  var prev = document.getElementById('nav-prev');
  prev.firstElementChild.click();
}
Mousetrap.bind('right', click_next);
Mousetrap.bind('h', click_prev);
Mousetrap.bind('left', click_prev);
Mousetrap.bind('l', click_next);
</script>

<div class="books-container">
<aside class="books-menu">
<input type="checkbox" id="menu">
<label for="menu">☰</label>
<div class="books-title">
<a href="./">Romeo and Julia, where Romeo is Basic Statistics</a>
</div><br />
<span class="books-subtitle">

</span>
<div class="books-menu-content">
<li><a class="menu-level-1" href="./about.html"><b>1</b> About</a></li>
<li><a class="menu-level-1" href="./why_julia.html"><b>2</b> Why Julia</a></li>
<li><a class="menu-level-2" href="./julia_is_fast.html"><b>2.1</b> Julia is fast</a></li>
<li><a class="menu-level-2" href="./julia_is_simple.html"><b>2.2</b> Julia is simple</a></li>
<li><a class="menu-level-2" href="./jl_pleasure_to_write.html"><b>2.3</b> Pleasure to write</a></li>
<li><a class="menu-level-2" href="./jl_not_mainstream.html"><b>2.4</b> Not mainstream</a></li>
<li><a class="menu-level-2" href="./jl_open_source.html"><b>2.5</b> Julia is free</a></li>
<li><a class="menu-level-1" href="./julia_first_encounter.html"><b>3</b> Julia - first encounter</a></li>
<li><a class="menu-level-2" href="./julia_installation.html"><b>3.1</b> Installation</a></li>
<li><a class="menu-level-2" href="./julia_language_constructs.html"><b>3.2</b> Language Constructs</a></li>
<li><a class="menu-level-2" href="./julia_language_variables.html"><b>3.3</b> Variables</a></li>
<li><a class="menu-level-2" href="./julia_language_functions.html"><b>3.4</b> Functions</a></li>
<li><a class="menu-level-2" href="./julia_language_decision_making.html"><b>3.5</b> Decision Making</a></li>
<li><a class="menu-level-2" href="./julia_language_repetition.html"><b>3.6</b> Repetition</a></li>
<li><a class="menu-level-2" href="./julia_language_libraries.html"><b>3.7</b> Additional libraries</a></li>
<li><a class="menu-level-2" href="./julia_language_exercises.html"><b>3.8</b> Julia - Exercises</a></li>
<li><a class="menu-level-2" href="./julia_language_exercises_solutions.html"><b>3.9</b> Julia - Solutions</a></li>
<li><a class="menu-level-1" href="./statistics_intro.html"><b>4</b> Statistics - introduction</a></li>
<li><a class="menu-level-2" href="./statistics_intro_imports.html"><b>4.1</b> Chapter imports</a></li>
<li><a class="menu-level-2" href="./statistics_intro_probability_definition.html"><b>4.2</b> Probability - definition</a></li>
<li><a class="menu-level-2" href="./statistics_intro_probability_properties.html"><b>4.3</b> Probability - properties</a></li>
<li><a class="menu-level-2" href="./statistics_prob_theor_practice.html"><b>4.4</b> Probability - theory and..</a></li>
<li><a class="menu-level-2" href="./statistics_prob_distribution.html"><b>4.5</b> Probability distribution</a></li>
<li><a class="menu-level-2" href="./statistics_normal_distribution.html"><b>4.6</b> Normal distribution</a></li>
<li><a class="menu-level-2" href="./statistics_intro_hypothesis_testing.html"><b>4.7</b> Hypothesis testing</a></li>
<li><a class="menu-level-2" href="./statistics_intro_exercises.html"><b>4.8</b> Statistics intro - Exerc..</a></li>
<li><a class="menu-level-2" href="./statistics_intro_exercises_solutions.html"><b>4.9</b> Statistics intro - Solut..</a></li>
<li><a class="menu-level-1" href="./compare_contin_data.html"><b>5</b> Comparisons - continuous d..</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_imports.html"><b>5.1</b> Chapter imports</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_one_samp_ttest.html"><b>5.2</b> One sample Student’s t..</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_two_samp_ttest.html"><b>5.3</b> Two samples Student’s ..</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_one_way_anova.html"><b>5.4</b> One-way ANOVA</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_post_hoc_tests.html"><b>5.5</b> Post-hoc tests</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_multip_correction.html"><b>5.6</b> Multiplicity correction</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_exercises.html"><b>5.7</b> Exercises - Comparisons ..</a></li>
<li><a class="menu-level-2" href="./compare_contin_data_exercises_solutions.html"><b>5.8</b> Solutions - Comparisons ..</a></li>
<li><a class="menu-level-1" href="./compare_categ_data.html"><b>6</b> Comparisons - categorical ..</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_imports.html"><b>6.1</b> Chapter imports</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_flashback.html"><b>6.2</b> Flashback</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_chisq_test.html"><b>6.3</b> Chi squared test</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_fisher_exact_text.html"><b>6.4</b> Fisher’s exact test</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_bigger_table.html"><b>6.5</b> Bigger table</a></li>
<li><a class="menu-level-2" href="./compare_categ_test_for_independence.html"><b>6.6</b> Test for independence</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_exercises.html"><b>6.7</b> Exercises - Comparisons ..</a></li>
<li><a class="menu-level-2" href="./compare_categ_data_exercises_solutions.html"><b>6.8</b> Solutions - Comparisons ..</a></li>
<li><a class="menu-level-1" href="./appendix.html"><b></b> Appendix</a></li>
<li><a class="menu-level-1" href="./references.html"><b>7</b> References</a></li>
</div>
</aside>

<div class="books-content">
<h2 data-number="6.8" id="sec:compare_categ_data_exercises_solutions"><span class="header-section-number">6.8</span> Solutions - Comparisons of Categorical Data</h2>
<p>In this sub-chapter you will find exemplary solutions to the exercises from the previous section.</p>
<h3 data-number="6.8.1" id="sec:compare_categ_data_ex1_solution"><span class="header-section-number">6.8.1</span> Solution to Exercise 1</h3>
<p>An exemplary <code>getContingencyTable</code> could look like this (here, a version that produces output that resembles the result of <code>FreqTables.freqtable</code>):</p>
<pre class="language-julia"><code>function getContingencyTable(
    rowVect::Vector{String},
    colVect::Vector{String},
    rowLabel::String,
    colLabel::String,
    )::Dfs.DataFrame

    rowNames::Vector{String} = sort(unique(rowVect))
    colNames::Vector{String} = sort(unique(colVect))
    pairs::Vector{Tuple{String, String}} = collect(zip(rowVect, colVect))
    pairsCounts::Dict{Tuple{String, String}, Int} = getCounts(pairs)
    labels::String = &quot;↓&quot; * rowLabel * &quot;/&quot; * colLabel * &quot;→&quot;
    df::Dfs.DataFrame = Dfs.DataFrame()
    columns::Dict{String, Vector{Int}} = Dict()

    for cn in colNames
        columns[cn] = [get(pairsCounts, (rn, cn), 0) for rn in rowNames]
    end

    df = Dfs.DataFrame(columns)
    Dfs.insertcols!(df, 1, labels =&gt; rowNames)

    return df
end</code></pre>
<p>Here, as we often do, we start by declaring some of the helpful variables. <code>rowNames</code> and <code>colNames</code> contain all the possible unique groups for each input variable (<code>rowVect</code> and <code>colVect</code>). Then we get all the consecutive pairings that are in the data by using <code>zip</code> and <code>collect</code> functions. For instance <code>collect(zip(["a", "a", "b"], ["x", "y", "x"]))</code> will yield us the following vector of tuples: <code>[("a", "x"), ("a", "y"), ("b", "x")]</code>. The pairs are then sent to <code>getCounts</code> (from Section <a href="./statistics_prob_theor_practice.html#sec:statistics_prob_theor_practice">4.4</a>) to find out how often a given pair occurs.</p>
<p>In the next step we define a variable <code>df</code> (for now it is empty) to hold our final result. We saw in Section <a href="./compare_categ_data_chisq_test.html#sec:compare_categ_data_chisq_test">6.3</a> that a data frame can be created by sending dictionary to the <code>Dfs.DataFrame</code> function. Therefore, we declare <code>columns</code> that will hold the count for every column of our contingency table.</p>
<p>We fill the columns one by one with <code>for cn in colNames</code> loop. To get a count for a particular row of a given column (<code>(rn, cn)</code>) we use <code>get</code> function that extracts it from <code>pairsCounts</code>. If the key is not there (a given combination of <code>(rn, cn)</code> does not exist) we return <code>0</code> as a default value. We fill columns by using comprehensions (see Section <a href="./julia_language_repetition.html#sec:julia_language_comprehensions">3.6.4</a>).</p>
<p>Finally, we put our counts (<code>columns</code>) into the data frame (<code>df</code>). Now, we insert a column with <code>rowNames</code> at position <code>1</code> (first column from left) with <code>Dfs.insertcols!</code>.</p>
<p>All that it is left to do is to return the result.</p>
<p>Let’s find out how our <code>getContingencyTable</code> works.</p>
<pre class="language-julia"><code>smokersByProfession = getContingencyTable(
    smoker,
    profession,
    &quot;smoker&quot;,
    &quot;profession&quot;
)
</code></pre>
<div id="tbl:smokersByProfession">
<table>
<caption>Table 6: Number of smokers by profession.</caption>
<thead>
<tr class="header">
<th style="text-align: right;">↓smoker/profession→</th>
<th style="text-align: right;">Lawyer</th>
<th style="text-align: right;">Priest</th>
<th style="text-align: right;">Teacher</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">no</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: right;">yes</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">20</td>
</tr>
</tbody>
</table>
</div>
<p>It appears to work just fine. Let’s swap the inputs and see if we get a consistent result.</p>
<pre class="language-julia"><code>smokersByProfessionTransposed = getContingencyTable(
    profession,
    smoker,
    &quot;profession&quot;,
    &quot;smoker&quot;
)
</code></pre>
<div id="tbl:smokersByProfessionTransposed">
<table>
<caption>Table 7: Number of smokers by profession transposed.</caption>
<thead>
<tr class="header">
<th style="text-align: right;">↓profession/smoker→</th>
<th style="text-align: right;">no</th>
<th style="text-align: right;">yes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">Lawyer</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: right;">Priest</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: right;">Teacher</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">20</td>
</tr>
</tbody>
</table>
</div>
<p>Looks good. And now for the small data set with possible zeros.</p>
<pre class="language-julia"><code>smokersByProfessionSmall = getContingencyTable(
    smokerSmall,
    professionSmall,
    &quot;smoker&quot;,
    &quot;profession&quot;
)
</code></pre>
<div id="tbl:smokersByProfessionSmall">
<table>
<caption>Table 8: Number of smokers by profession (small data set).</caption>
<thead>
<tr class="header">
<th style="text-align: right;">↓smoker/profession→</th>
<th style="text-align: right;">Lawyer</th>
<th style="text-align: right;">Priest</th>
<th style="text-align: right;">Teacher</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">no</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">yes</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
<p>Seems to be OK as well. Of course we can use this function with a data frame, e.g. <code>getContingencyTable(df[!, "col1"], df[!, "col2"], "col1", "col2")</code> or adopt it slightly to take a data frame as an input.</p>
<p>To be continued…</p>


<div class="bottom-nav">
    <p id="nav-prev" style="text-align: left;">
        <a class="menu-level-2" href="./compare_categ_data_exercises.html"><b>6.7</b> Exercises - Comparisons ..</a> <kbd>←</kbd>
        <span id="nav-next" style="float: right;">
            <kbd>→</kbd> <a class="menu-level-1" href="./appendix.html"><b></b> Appendix</a>
        </span>
    </p>
</div>


<div class="license">
    <br/>
  <br/>
  <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    Bartlomiej Lukaszuk
</div>
</div>
</div>
</body>
</html>